<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Contributing to Sphinx &#8212; Sphinx documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=29da98fa" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx13.css?v=ba1752c5" />
    <script src="../_static/documentation_options.js?v=fbcd4929"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/translations.js?v=540d3cec"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/sphinx-docs-l10n/internals/contributing.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx documentation 中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="icon" href="../_static/favicon.svg"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Sphinx&#39;s release process" href="release-process.html" />
    <link rel="prev" title="Contribute to Sphinx" href="index.html" />

 

<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="github" viewBox="0 0 16 16">
    <title>GitHub</title>
    <svg
      stroke="currentColor"
      fill="currentColor"
      stroke-width="0"
      viewBox="0 0 16 16"
    >
      <path
        fill-rule="evenodd"
        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"
      ></path>
    </svg>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<div class="pageheader">
  <div class="brand">
    <a href="../index.html">
      <img src="../_static/sphinx-logo.svg" alt="logo" />
      <span>Sphinx</span>
    </a>
  </div>
  <div class="icons">
    <a href="https://github.com/sphinx-doc/sphinx" title="Source Code" target="_blank">
      <svg><use href="#github"></use></svg>
    </a>
  </div>
</div>

<div class="related" role="navigation" aria-label="Related">
  <h3>导航</h3>
  <ul>
    <li><a href="../index.html">Documentation</a> &raquo;</li>
      <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Contribute to Sphinx</a> &#187;</li>
    <li class="nav-item nav-item-this"><a href="">Contributing to Sphinx</a></li>
  </ul>
</div>

<div class="document">
  <div class="sphinxsidebar" role="navigation" aria-label="Main">
<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="提交" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
      <div class="sphinxsidebar-navigation__contents">
        <h3>On this page</h3>
        <ul>
<li><a class="reference internal" href="#">Contributing to Sphinx</a><ul>
<li><a class="reference internal" href="#get-help">Get help</a></li>
<li><a class="reference internal" href="#bug-reports-and-feature-requests">Bug Reports and Feature Requests</a></li>
<li><a class="reference internal" href="#contribute-code">Contribute code</a><ul>
<li><a class="reference internal" href="#getting-started">Getting started</a></li>
<li><a class="reference internal" href="#coding-style">Coding style</a></li>
<li><a class="reference internal" href="#unit-tests">Unit tests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contribute-documentation">Contribute documentation</a><ul>
<li><a class="reference internal" href="#build-the-documentation">Build the documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#translations">Translations</a><ul>
<li><a class="reference internal" href="#translations-notes-for-maintainers">Translations notes for maintainers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-tips">Debugging tips</a></li>
<li><a class="reference internal" href="#updating-generated-files">Updating generated files</a></li>
</ul>
</li>
</ul>

      </div>
    <div class="sphinxsidebar-navigation__pages">
      <p class="caption" role="heading"><span class="caption-text">The Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/installation.html">Installing Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/quickstart.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Build your first project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Using Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Extending Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extdev/index.html">Sphinx API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../latex.html">LaTeX customization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../support.html">Get support</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contribute to Sphinx</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Contributing to Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html">Sphinx's release process</a></li>
<li class="toctree-l2"><a class="reference internal" href="organization.html">Organization of the Sphinx project</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-of-conduct.html">Sphinx Code of Conduct</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Sphinx FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Sphinx authors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Command-line tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/extensions/index.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/restructuredtext/index.html">reStructuredText</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes/index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Projects using Sphinx</a></li>
</ul>

    </div>
  </div>
  <div class="body" role="main">
    
  <section id="contributing-to-sphinx">
<h1>Contributing to Sphinx<a class="headerlink" href="#contributing-to-sphinx" title="链接到此标题。">¶</a></h1>
<p>There are many ways you can contribute to Sphinx, be it filing bug reports or
feature requests, writing new documentation or submitting patches for new or
fixed behavior. This guide serves to illustrate how you can get started with
this.</p>
<section id="get-help">
<h2>Get help<a class="headerlink" href="#get-help" title="链接到此标题。">¶</a></h2>
<p>The Sphinx community maintains a number of mailing lists and IRC channels.</p>
<dl class="simple">
<dt>Stack Overflow with tag <a class="reference external" href="https://stackoverflow.com/questions/tagged/python-sphinx">python-sphinx</a></dt><dd><p>Questions and answers about use and development.</p>
</dd>
<dt><a class="reference external" href="https://github.com/orgs/sphinx-doc/discussions/categories/q-a">GitHub Discussions Q&amp;A</a></dt><dd><p>Question-and-answer style forum for discussions.</p>
</dd>
<dt>sphinx-users &lt;<a class="reference external" href="mailto:sphinx-users&#37;&#52;&#48;googlegroups&#46;com">sphinx-users<span>&#64;</span>googlegroups<span>&#46;</span>com</a>&gt;</dt><dd><p>Mailing list for user support.</p>
</dd>
<dt>sphinx-dev &lt;<a class="reference external" href="mailto:sphinx-dev&#37;&#52;&#48;googlegroups&#46;com">sphinx-dev<span>&#64;</span>googlegroups<span>&#46;</span>com</a>&gt;</dt><dd><p>Mailing list for development related discussions.</p>
</dd>
<dt>#sphinx-doc on irc.libera.chat</dt><dd><p>IRC channel for development questions and user support.</p>
</dd>
</dl>
</section>
<section id="bug-reports-and-feature-requests">
<h2>Bug Reports and Feature Requests<a class="headerlink" href="#bug-reports-and-feature-requests" title="链接到此标题。">¶</a></h2>
<p>If you have encountered a problem with Sphinx or have an idea for a new
feature, please submit it to the <a class="reference external" href="https://github.com/sphinx-doc/sphinx/issues">issue tracker</a> on GitHub.</p>
<p>For bug reports, please include the output produced during the build process
and also the log file Sphinx creates after it encounters an unhandled
exception.
The location of this file should be shown towards the end of the error message.
Please also include the output of <strong class="program">sphinx-build --bug-report</strong>.</p>
<p>Including or providing a link to the source files involved may help us fix the
issue.  If possible, try to create a minimal project that produces the error
and post that instead.</p>
</section>
<section id="contribute-code">
<h2>Contribute code<a class="headerlink" href="#contribute-code" title="链接到此标题。">¶</a></h2>
<p>The Sphinx source code is managed using Git and is <a class="reference external" href="https://github.com/sphinx-doc/sphinx">hosted on GitHub</a>.  The
recommended way for new contributors to submit code to Sphinx is to fork this
repository and submit a pull request after committing changes to their fork.
The pull request will then need to be approved by one of the core developers
before it is merged into the main repository.</p>
<section id="getting-started">
<span id="contribute-get-started"></span><h3>Getting started<a class="headerlink" href="#getting-started" title="链接到此标题。">¶</a></h3>
<p>Before starting on a patch, we recommend checking for open issues
or opening a fresh issue to start a discussion around a feature idea or a bug.
If you feel uncomfortable or uncertain about an issue or your changes,
feel free to <a class="reference external" href="https://github.com/orgs/sphinx-doc/discussions/">start a discussion</a>.</p>
<p>These are the basic steps needed to start developing on Sphinx.</p>
<ol class="arabic">
<li><p>Create an account on GitHub.</p></li>
<li><p><a class="reference external" href="https://github.com/sphinx-doc/sphinx/fork">Fork</a> the main Sphinx repository (<a class="reference external" href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a>)
using the GitHub interface.</p>
</li>
<li><p>Clone the forked repository to your machine.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/&lt;USERNAME&gt;/sphinx
<span class="nb">cd</span><span class="w"> </span>sphinx
</pre></div>
</div>
</li>
<li><p>Install uv and set up your environment.</p>
<p>We recommend using <strong class="program">uv</strong> for dependency management.
Install it with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>uv
</pre></div>
</div>
<p>Then, set up your environment:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>sync
</pre></div>
</div>
<p><strong>Alternative:</strong> If you prefer not to use <strong class="program">uv</strong>, you can use
<strong class="program">pip</strong>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
.<span class="w"> </span>.venv/bin/activate
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
</li>
<li><p>Create a new working branch. Choose any name you like.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>feature-xyz
</pre></div>
</div>
</li>
<li><p>Hack, hack, hack.</p>
<p>Write your code along with tests that shows that the bug was fixed or that
the feature works as expected.</p>
</li>
<li><p>Add a bullet point to <code class="file docutils literal notranslate"><span class="pre">CHANGES.rst</span></code> if the fix or feature is not trivial
(small doc updates, typo fixes), then commit:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;Add useful new feature that does this.&#39;</span>
</pre></div>
</div>
</li>
<li><p>Push changes in the branch to your forked repository on GitHub:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature-xyz
</pre></div>
</div>
</li>
<li><p>Submit a pull request from your branch to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p>
<p>GitHub recognizes certain phrases that can be used to automatically
update the issue tracker.
For example, including 'Closes #42' in the body of your pull request
will close issue #42 if the PR is merged.</p>
</li>
<li><p>Wait for a core developer or contributor to review your changes.</p>
<p>You may be asked to address comments on the review. If so, please avoid
force pushing to the branch. Sphinx uses the <em>squash merge</em> strategy when
merging PRs, so follow-up commits will all be combined.</p>
</li>
</ol>
</section>
<section id="coding-style">
<h3>Coding style<a class="headerlink" href="#coding-style" title="链接到此标题。">¶</a></h3>
<p>Please follow these guidelines when writing code for Sphinx:</p>
<ul class="simple">
<li><p>Try to use the same code style as used in the rest of the project.</p></li>
<li><p>For non-trivial changes, please update the <code class="file docutils literal notranslate"><span class="pre">CHANGES.rst</span></code> file.
If your changes alter existing behavior, please document this.</p></li>
<li><p>New features should be documented.
Include examples and use cases where appropriate.
If possible, include a sample that is displayed in the generated output.</p></li>
<li><p>When adding a new configuration variable,
be sure to <a class="reference internal" href="../usage/configuration.html"><span class="doc">document it</span></a>
and update <code class="file docutils literal notranslate"><span class="pre">sphinx/cmd/quickstart.py</span></code> if it's important enough.</p></li>
<li><p>Add appropriate unit tests.</p></li>
</ul>
<p>Style and type checks can be run as follows:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>check
uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>format
uv<span class="w"> </span>run<span class="w"> </span>mypy
</pre></div>
</div>
</section>
<section id="unit-tests">
<h3>Unit tests<a class="headerlink" href="#unit-tests" title="链接到此标题。">¶</a></h3>
<p>Sphinx is tested using <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> for Python code and <a class="reference external" href="https://jasmine.github.io/">Jasmine</a> for JavaScript.</p>
<p>To run Python unit tests, we recommend using <strong class="program">tox</strong>, which provides a number
of targets and allows testing against multiple different Python environments:</p>
<ul>
<li><p>To list all possible targets:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-av
</pre></div>
</div>
</li>
<li><p>To run unit tests for a specific Python version, such as Python 3.14:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span>py314
</pre></div>
</div>
</li>
<li><p>Arguments to <strong class="program">pytest</strong> can be passed via <strong class="program">tox</strong>,
e.g., in order to run a particular test:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>-e<span class="w"> </span>py314<span class="w"> </span>tests/test_module.py::test_new_feature
</pre></div>
</div>
</li>
</ul>
<p>You can also test by installing dependencies in your local environment:</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>pytest
</pre></div>
</div>
</div></blockquote>
<p>Or with <strong class="program">pip</strong>:</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--group<span class="w"> </span><span class="nb">test</span>
pytest
</pre></div>
</div>
</div></blockquote>
<p>To run JavaScript tests, use <strong class="program">npm</strong>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install
npm<span class="w"> </span>run<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p><strong class="program">jasmine</strong> requires a Firefox binary to use as a test browser.</p>
<p>On Unix systems, you can check the presence and location of the <code class="docutils literal notranslate"><span class="pre">firefox</span></code>
binary at the command-line by running <code class="docutils literal notranslate"><span class="pre">command</span> <span class="pre">-v</span> <span class="pre">firefox</span></code>.</p>
</div>
<p>New unit tests should be included in the <code class="file docutils literal notranslate"><span class="pre">tests/</span></code> directory where necessary:</p>
<ul class="simple">
<li><p>For bug fixes, first add a test that fails without your changes and passes
after they are applied.</p></li>
<li><p>Tests that need a <strong class="program">sphinx-build</strong> run should be integrated in one of the
existing test modules if possible.</p></li>
<li><p>Tests should be quick and only test the relevant components, as we aim that
<em>the test suite should not take more than a minute to run</em>.
In general, avoid using the <code class="docutils literal notranslate"><span class="pre">app</span></code> fixture and <code class="docutils literal notranslate"><span class="pre">app.build()</span></code>
unless a full integration test is required.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">在 1.8 版本加入: </span>Sphinx also runs JavaScript tests.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5.2 版本发生变更: </span>Sphinx was switched from nose to pytest.</p>
</div>
</section>
</section>
<section id="contribute-documentation">
<h2>Contribute documentation<a class="headerlink" href="#contribute-documentation" title="链接到此标题。">¶</a></h2>
<p>Contributing to documentation involves modifying the source files
found in the <code class="file docutils literal notranslate"><span class="pre">doc/</span></code> folder.
To get started, you should first follow <a class="reference internal" href="#contribute-get-started"><span class="std std-ref">Getting started</span></a>,
and then take the steps below to work with the documentation.</p>
<p>The following sections describe how to get started with contributing
documentation, as well as key aspects of a few different tools that we use.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">待处理</p>
<p>Add a more extensive documentation contribution guide.</p>
</div>
<section id="build-the-documentation">
<h3>Build the documentation<a class="headerlink" href="#build-the-documentation" title="链接到此标题。">¶</a></h3>
<p>To build the documentation, run the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sphinx-build<span class="w"> </span>-M<span class="w"> </span>html<span class="w"> </span>./doc<span class="w"> </span>./build/sphinx<span class="w"> </span>--fail-on-warning
</pre></div>
</div>
<p>This will parse the Sphinx documentation's source files and generate HTML for
you to preview in <code class="file docutils literal notranslate"><span class="pre">build/sphinx/html</span></code>.</p>
<p>You can also build a <strong>live version of the documentation</strong> that you can preview
in the browser. It will detect changes and reload the page any time you make
edits.
To do so, use <a class="reference external" href="https://github.com/sphinx-doc/sphinx-autobuild">sphinx-autobuild</a> to run the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sphinx-autobuild<span class="w"> </span>./doc<span class="w"> </span>./build/sphinx/
</pre></div>
</div>
</section>
</section>
<section id="translations">
<h2>Translations<a class="headerlink" href="#translations" title="链接到此标题。">¶</a></h2>
<p>The parts of messages in Sphinx that go into builds are translated into several
locales.  The translations are kept as gettext <code class="docutils literal notranslate"><span class="pre">.po</span></code> files translated from the
master template <code class="file docutils literal notranslate"><span class="pre">sphinx/locale/sphinx.pot</span></code>.</p>
<p>These Sphinx core messages are translated using the online <a class="reference external" href="https://explore.transifex.com/sphinx-doc/sphinx-1/">Transifex</a> platform.</p>
<p>Translated strings from the platform are pulled into the Sphinx repository
by a maintainer before a new release.</p>
<p>We do not accept pull requests altering the translation files directly.
Instead, please contribute translations via the Transifex platform.</p>
<section id="translations-notes-for-maintainers">
<h3>Translations notes for maintainers<a class="headerlink" href="#translations-notes-for-maintainers" title="链接到此标题。">¶</a></h3>
<p>The <a class="reference external" href="https://developers.transifex.com/docs/cli">transifex CLI</a> (<code class="docutils literal notranslate"><span class="pre">tx</span></code>)
can be used to pull translations in <code class="docutils literal notranslate"><span class="pre">.po</span></code> format from Transifex.
To do this, go to <code class="file docutils literal notranslate"><span class="pre">sphinx/locale</span></code> and then run <code class="docutils literal notranslate"><span class="pre">tx</span> <span class="pre">pull</span> <span class="pre">-f</span> <span class="pre">-l</span> <span class="pre">LANG</span></code>
where <code class="docutils literal notranslate"><span class="pre">LANG</span></code> is an existing language identifier.
It is good practice to run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">utils/babel_runner.py</span> <span class="pre">update</span></code> afterwards
to make sure the <code class="docutils literal notranslate"><span class="pre">.po</span></code> file has the canonical Babel formatting.</p>
<p>Sphinx uses <a class="reference external" href="https://babel.pocoo.org/en/latest/">Babel</a> to extract messages
and maintain the catalog files.  The <code class="file docutils literal notranslate"><span class="pre">utils</span></code> directory contains a helper
script, <code class="file docutils literal notranslate"><span class="pre">utils/babel_runner.py</span></code>.</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">babel_runner.py</span> <span class="pre">extract</span></code> to update the <code class="docutils literal notranslate"><span class="pre">.pot</span></code> template.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">babel_runner.py</span> <span class="pre">update</span></code> to update all existing language
catalogs in <code class="docutils literal notranslate"><span class="pre">sphinx/locale/*/LC_MESSAGES</span></code> with the current messages in the
template file.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">babel_runner.py</span> <span class="pre">compile</span></code> to compile the <code class="docutils literal notranslate"><span class="pre">.po</span></code> files to binary
<code class="docutils literal notranslate"><span class="pre">.mo</span></code> files and <code class="docutils literal notranslate"><span class="pre">.js</span></code> files.</p></li>
</ul>
<p>When an updated <code class="docutils literal notranslate"><span class="pre">.po</span></code> file is submitted, run
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">babel_runner.py</span> <span class="pre">compile</span></code> to commit both the source and the compiled
catalogs.</p>
<p>When a new locale is added, add a new directory with the ISO 639-1 language
identifier and put <code class="docutils literal notranslate"><span class="pre">sphinx.po</span></code> in there.  Don't forget to update the possible
values for <a class="reference internal" href="../usage/configuration.html#confval-language"><code class="xref std std-confval docutils literal notranslate"><span class="pre">language</span></code></a> in <code class="file docutils literal notranslate"><span class="pre">doc/usage/configuration.rst</span></code>.</p>
</section>
</section>
<section id="debugging-tips">
<h2>Debugging tips<a class="headerlink" href="#debugging-tips" title="链接到此标题。">¶</a></h2>
<ul class="simple">
<li><p>Delete the build cache before building documents if you make changes in the
code by running the command <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> or using the
<a class="reference internal" href="../man/sphinx-build.html#cmdoption-sphinx-build-E"><code class="xref std std-option docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">--fresh-env</span></code></a> option.</p></li>
<li><p>Use the <a class="reference internal" href="../man/sphinx-build.html#cmdoption-sphinx-build-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">--pdb</span></code></a> option to run <code class="docutils literal notranslate"><span class="pre">pdb</span></code> on exceptions.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">node.pformat()</span></code> and <code class="docutils literal notranslate"><span class="pre">node.asdom().toxml()</span></code> to generate a printable
representation of the document structure.</p></li>
<li><p>Set the configuration variable <a class="reference internal" href="../usage/configuration.html#confval-keep_warnings"><code class="xref std std-confval docutils literal notranslate"><span class="pre">keep_warnings</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code> so
warnings will be displayed in the generated output.</p></li>
<li><p>Set the configuration variable <a class="reference internal" href="../usage/configuration.html#confval-nitpicky"><code class="xref std std-confval docutils literal notranslate"><span class="pre">nitpicky</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code> so that Sphinx
will complain about references without a known target.</p></li>
<li><p>Set the debugging options in the <a class="reference external" href="https://docutils.sourceforge.io/docs/user/config.html">Docutils configuration file</a>.</p></li>
</ul>
</section>
<section id="updating-generated-files">
<h2>Updating generated files<a class="headerlink" href="#updating-generated-files" title="链接到此标题。">¶</a></h2>
<ul>
<li><p>JavaScript stemming algorithms in <code class="file docutils literal notranslate"><span class="pre">sphinx/search/non-minified-js/*.js</span></code>
and stopword files in <code class="file docutils literal notranslate"><span class="pre">sphinx/search/_stopwords/</span></code>
are generated from the <a class="reference external" href="https://snowballstem.org/">Snowball project</a>
by running <code class="file docutils literal notranslate"><span class="pre">utils/generate_snowball.py</span></code>.</p>
<p>Minified files in <code class="file docutils literal notranslate"><span class="pre">sphinx/search/minified-js/*.js</span></code> are generated from
non-minified ones using <strong class="program">uglifyjs</strong> (installed via npm).
See <code class="file docutils literal notranslate"><span class="pre">sphinx/search/minified-js/README.rst</span></code>.</p>
</li>
<li><p>The <code class="file docutils literal notranslate"><span class="pre">searchindex.js</span></code> files found in
the <code class="file docutils literal notranslate"><span class="pre">tests/js/fixtures/*</span></code> directories
are generated by using the standard Sphinx HTML builder
on the corresponding input projects found in <code class="file docutils literal notranslate"><span class="pre">tests/js/roots/*</span></code>.
The fixtures provide test data used by the Sphinx JavaScript unit tests,
and can be regenerated by running
the <code class="file docutils literal notranslate"><span class="pre">utils/generate_js_fixtures.py</span></code> script.</p></li>
</ul>
</section>
</section>


    
  <div class="related-pages" role="navigation" aria-label="Related">
    <a class="prev-page" href="index.html">
        <svg><use href="#svg-arrow-right"></use></svg>
        <div class="page-info">
          <div class="context">
            <span>Previous</span>
          </div>
          
          <div class="title">Contribute to Sphinx</div>
          
        </div>
      </a>
    <a class="next-page" href="release-process.html">
        <div class="page-info">
          <div class="context">
            <span>Next</span>
          </div>
          <div class="title">Sphinx's release process</div>
        </div>
        <svg><use href="#svg-arrow-right"></use></svg>
      </a>
  </div>

  </div>
</div>
<div class="footer" role="contentinfo">
  
    &#169; 版权所有 2007-2026, the Sphinx developers.
  由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0创建。
</div>
  </body>
</html>